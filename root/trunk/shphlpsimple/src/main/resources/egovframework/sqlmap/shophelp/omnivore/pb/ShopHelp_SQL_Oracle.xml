<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ShpTemp">

	<typeAlias  alias="ShpTempVO" type="shophelp.co.kr.cmm.vo.ShpTempVO"/>
	
	<resultMap id="ShpTempList" class="shophelp.co.kr.cmm.vo.ShpTempVO">
		<result property="tmp_div" column="tmp_div" columnIndex="1"/>
		<result property="tmp_seq" column="tmp_seq" columnIndex="2"/>
		<result property="tmp_col00" column="tmp_col00" columnIndex="3"/>
		<result property="tmp_col01" column="tmp_col01" columnIndex="4"/>
	</resultMap>
	
	<select id="ShpTemp.selectCoupon" parameterClass="ShpTempVO" resultMap="ShpTempList">
		<![CDATA[ 
		  SELECT   tmp_div,
		           tmp_seq,
		           tmp_col00,
		           tmp_col01
		    FROM   shp_temp
		   WHERE   tmp_div = 'CPN' 
		   AND tmp_col01 = 'N' 
		   AND ROWNUM = 1
		ORDER BY   TMP_SEQ
		]]>
	</select>

 	<update id="ShpTemp.updateUsedCoupon" parameterClass="ShpTempVO">
 		<![CDATA[
			UPDATE shp_temp SET 
				tmp_col01 = 'Y',
				tmp_col02 = #tmp_col02#,
				tmp_col03 = #tmp_col03#,
				tmp_col04 = #tmp_col04#,
				tmp_col09 = SYSDATE
			WHERE tmp_div = #tmp_div#
			AND tmp_seq = #tmp_seq#
			
 		]]>
 	</update>


</sqlMap>            